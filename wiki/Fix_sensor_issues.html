<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Xiaomi Wiki</title><meta name="description" content="Resources for Xiaomi devices, formerly hosted on r/Xiaomi"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.20">
    <link rel="preload" href="/assets/js/runtime~app.1e4ad4c2.js" as="script"><link rel="preload" href="/assets/css/styles.8ee48477.css" as="style"><link rel="preload" href="/assets/js/4640.3a645d64.js" as="script"><link rel="preload" href="/assets/js/app.6ad831fc.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.8ee48477.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="Xiaomi Wiki"><span class="site-name can-hide">Xiaomi Wiki</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/wiki/Fix_sensor_issues.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/fr/" class="nav-link" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/wiki/Fix_sensor_issues.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/fr/" class="nav-link" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item"></p><ul class=""><li><!--[--><a aria-current="page" href="/wiki/Fix_sensor_issues.html#fix-sensor-issues" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Fix sensor issues"><!--[--><!--]--> Fix sensor issues <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/wiki/Fix_sensor_issues.html#instructions" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Instructions"><!--[--><!--]--> Instructions <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><p><a href="/" class="">Index page</a></p><h2 id="fix-sensor-issues" tabindex="-1"><a class="header-anchor" href="#fix-sensor-issues" aria-hidden="true">#</a> Fix sensor issues</h2><p>On Xiaomi devices, sensor data is stored in a partition called <em>persist</em>. This partition is flashable and an image of it is included with all fastboot ROMs but devices made after 2016 don&#39;t allow you to modify it in fastboot mode, regardless of the status of the bootloader. Unfortunately, software issues may cause the sensors in the device to misbehave or stop working completely, but usually reflashing this partition solves these problems. If the partition is write protected in fastboot mode, you&#39;ll have to use Qualcomm&#39;s EDL mode to flash it. The EDL flashing script originally skips the persist partition but you can modify it to flash that as well when you are flashing with MiFlash.</p><h3 id="instructions" tabindex="-1"><a class="header-anchor" href="#instructions" aria-hidden="true">#</a> Instructions</h3><p><strong>Requirements:</strong> Qualcomm Snapdragon chipset</p><ol><li><p>Download the latest MiFlash from <a href="/wiki/Tools_for_Xiaomi_devices.html" class="">here</a> and install it.</p></li><li><p>Download the Fastboot ROM you want to flash from <a href="https://xiaomifirmwareupdater.com/miui/" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> and unzip it.</p></li></ol><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>You might get a single .tar file after unzipping which has to be unzipped again in order to get the necessary files.</p></div><ol start="3"><li><p>In the unzipped folder, enter the <code>images</code> folder and open the file <code>rawprogram0.xml</code> in a text editor (Notepad++ or VS Code recommended).</p></li><li><p>In the <strong>line</strong> that contains the string <code>label=&quot;persist&quot;</code>, change <code>filename=&quot;&quot;</code> to <code>filename=&quot;persist.img&quot;</code>.</p><p>If there&#39;s a line right below it, that contains the string <code>label=&quot;persistbak&quot;</code>, change its <code>filename=&quot;&quot;</code> to <code>filename=&quot;persist.img&quot;</code> as well.</p></li><li><p>Save <code>rawprogram0.xml</code> and close the text editor.</p></li><li><p>Connect the device to your PC and <a href="/wiki/Access_EDL_mode.html" class="">enter EDL mode</a>.</p></li><li><p>Launch MiFlash and with the Select button browse for the unzipped folder, then click Refresh. The device should appear as a COM port.</p></li><li><p>Click Flash and wait until the flashing sequence finishes.</p></li><li><p>Disconnect the device and hold the Power button until the device turns on.</p><p>The first boot may take up to 15 minutes.</p></li></ol><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">7/2/2021, 8:26:44 PM</span></div><!----></footer><!----><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.1e4ad4c2.js" defer></script><script src="/assets/js/4640.3a645d64.js" defer></script><script src="/assets/js/app.6ad831fc.js" defer></script>
  </body>
</html>
